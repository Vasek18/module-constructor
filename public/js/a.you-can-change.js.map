{"version":3,"sources":["a.you-can-change.coffee"],"names":[],"mappings":"AACA;EAAA,CAAA,CAAE,QAAF,CAAW,CAAC,EAAZ,CAAe,OAAf,EAAwB,kBAAxB,EAA4C,SAAA;AAC3C,QAAA;IAAA,CAAA,GAAI,CAAA,CAAE,IAAF;IACJ,GAAA,GAAM,CAAC,CAAC,IAAF,CAAA;IACN,IAAA,GAAO,CAAC,CAAC,IAAF,CAAO,WAAP;IACP,OAAA,GAAU,CAAC,CAAC,IAAF,CAAO,cAAP;IACV,QAAA,GAAW,CAAC,CAAC,IAAF,CAAO,eAAP;IACX,IAAA,GAAO,CAAC,CAAC,OAAF,CAAU,MAAV;IACP,IAAA,GAAU,CAAC,CAAC,QAAF,CAAW,MAAX,CAAH,GAA2B,MAA3B,GAAuC;IAE9C,IAAI,CAAC,QAAD,IAAa,QAAA,KAAY,UAA7B;MACC,CAAC,CAAC,WAAF,CAAc,wDAAA,GAAyD,IAAzD,GAA8D,UAA9D,GAAwE,IAAxE,GAA6E,cAA7E,GAA2F,OAA3F,GAAmG,WAAnG,GAA8G,GAA9G,GAAkH,IAAhI,EADD;;IAEA,IAAG,QAAA,KAAY,UAAf;MACC,CAAC,CAAC,WAAF,CAAc,+CAAA,GAAgD,IAAhD,GAAqD,UAArD,GAA+D,IAA/D,GAAoE,cAApE,GAAkF,OAAlF,GAA0F,KAA1F,GAA+F,GAA/F,GAAmG,cAAjH,EADD;;IAGA,KAAA,GAAQ,IAAI,CAAC,IAAL,CAAU,SAAA,GAAU,IAAV,GAAe,IAAzB;IACR,KAAK,CAAC,KAAN,CAAA;IACA,KAAK,CAAC,GAAN,CAAU,GAAV;AAEA,WAAO;EAlBoC,CAA5C;;EAqBA,CAAA,CAAE,QAAF,CAAW,CAAC,EAAZ,CAAe,MAAf,EAAuB,+CAAvB,EAAwE,SAAA;AACvE,QAAA;IAAA,KAAA,GAAQ,CAAA,CAAE,IAAF;IACR,GAAA,GAAM,KAAK,CAAC,GAAN,CAAA;IACN,IAAA,GAAO,KAAK,CAAC,IAAN,CAAW,MAAX;IACP,OAAA,GAAU,KAAK,CAAC,IAAN,CAAW,SAAX;IACV,IAAA,GAAO,KAAK,CAAC,OAAN,CAAc,MAAd;IACP,IAAA,GAAU,KAAK,CAAC,QAAN,CAAe,MAAf,CAAH,GAA+B,IAA/B,GAAyC;IAGhD,MAAA,GAAS,IAAI,CAAC,IAAL,CAAU,QAAV;IACT,MAAA,GAAS,IAAI,CAAC,IAAL,CAAU,QAAV;IACT,IAAG,IAAI,CAAC,IAAL,CAAU,kBAAV,CAA6B,CAAC,MAAjC;MACC,MAAA,GAAS,IAAI,CAAC,IAAL,CAAU,kBAAV,CAA6B,CAAC,GAA9B,CAAA,EADV;;IAGA,IAAG,IAAH;MACC,CAAC,CAAC,IAAF,CACC;QAAA,GAAA,EAAK,MAAL;QACA,IAAA,EAAM,IAAI,CAAC,cAAL,CAAA,CADN;QAEA,IAAA,EAAM,MAFN;QAGA,OAAA,EAAS,SAAC,MAAD;UACR,KAAK,CAAC,WAAN,CAAkB,2BAAA,GAA2B,CAAI,IAAH,GAAa,MAAb,GAAA,MAAD,CAA3B,GAAgD,eAAhD,GAA+D,IAA/D,GAAoE,mBAApE,GAAuF,OAAvF,GAA+F,IAA/F,GAAmG,GAAnG,GAAuG,MAAzH;AAEA,iBAAO;QAHC,CAHT;OADD,EADD;KAAA,MAAA;MAWC,IAAI,CAAC,MAAL,CAAA,EAXD;;AAaA,WAAO;EA3BgE,CAAxE;AArBA","file":"a.you-can-change.js","sourcesContent":["# todo работа с textarea\r\n$(document).on \"click\", \"a.you-can-change\", ->\r\n\ta = $(this)\r\n\tval = a.text()\r\n\tname = a.attr('data-name')\r\n\tpattern = a.attr('data-pattern')\r\n\tformtype = a.attr('data-formtype')\r\n\tform = a.parents('form')\r\n\tajax = if a.hasClass('ajax') then 'ajax' else ''\r\n\r\n\tif (!formtype or formtype != 'textarea')\r\n\t\ta.replaceWith(\"<input type='text' class='form-control you-can-change #{ajax}' name='#{name}'' pattern='#{pattern}' value='#{val}'>\")\r\n\tif formtype == 'textarea'\r\n\t\ta.replaceWith(\"<textarea class='form-control you-can-change #{ajax}' name='#{name}'' pattern='#{pattern}'>'#{val}'</textarea>\")\r\n\r\n\tinput = form.find(\"[name='#{name}']\")\r\n\tinput.focus()\r\n\tinput.val(val) # помещение курсора в конец\r\n\r\n\treturn false\r\n\r\n# todo patterns bubbles\r\n$(document).on \"blur\", \"input.you-can-change, textarea.you-can-change\", ->\r\n\tinput = $(this)\r\n\tval = input.val()\r\n\tname = input.attr('name')\r\n\tpattern = input.attr('pattern')\r\n\tform = input.parents('form')\r\n\tajax = if input.hasClass('ajax') then true else false\r\n\r\n\r\n\taction = form.attr('action')\r\n\tmethod = form.attr('method')\r\n\tif form.find('[name=\"_method\"]').length\r\n\t\tmethod = form.find('[name=\"_method\"]').val()\r\n\r\n\tif ajax\r\n\t\t$.ajax(\r\n\t\t\turl: action,\r\n\t\t\tdata: form.serializeArray(),\r\n\t\t\ttype: method,\r\n\t\t\tsuccess: (answer) ->\r\n\t\t\t\tinput.replaceWith(\"<a class='you-can-change #{if ajax then \"ajax\"}' data-name='#{name}'' data-pattern='#{pattern}'>#{val}</a>\")\r\n#\t\t\t\tconsole.log(answer);\r\n\t\t\t\treturn false\r\n\t\t)\r\n\telse\r\n\t\tform.submit()\r\n\r\n\treturn false"],"sourceRoot":"/source/"}