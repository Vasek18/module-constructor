{"version":3,"sources":["bitrix_download_form.coffee"],"names":[],"mappings":"AAAA;AAAA,MAAA;;EAAA,mBAAA,GAAsB;;EACtB,eAAA,GAAkB,CAAA,CAAE,QAAA,GAAS,mBAAT,GAA6B,GAA/B;;EAClB,wBAAA,GAA2B;;EAC3B,uBAAA,GAA0B;;EAC1B,yBAAA,GAA4B;;EAE5B,sBAAA,GAAyB,CAAA,CAAE,oBAAF;;EACzB,cAAA,GAAiB,CAAA,CAAE,gBAAF;;EACjB,kBAAA,GAAqB,CAAA,CAAE,uBAAF;;EACrB,wBAAA,GAA2B;;EAC3B,gCAAA,GAAmC;;EACnC,UAAA,GAAa,CAAA,CAAE,eAAF;;EAGb,CAAA,CAAE,QAAF,CAAW,CAAC,EAAZ,CAAe,QAAf,EAAyB,SAAA,GAAU,mBAAV,GAA8B,GAAvD,EAA2D,SAAA;AAC1D,QAAA;IAAA,eAAA,GAAkB,CAAA,CAAE,IAAF;IAClB,UAAA,GAAa,eAAe,CAAC,GAAhB,CAAA;IACb,UAAA,CAAW,UAAX;EAH0D,CAA3D;;EAOA,CAAA,CAAE,QAAF,CAAW,CAAC,KAAZ,CAAkB,SAAA;IACjB,UAAA,CAAW,eAAe,CAAC,GAAhB,CAAA,CAAX;EADiB,CAAlB;;EAKA,CAAA,CAAE,QAAF,CAAW,CAAC,EAAZ,CAAe,OAAf,EAAwB,YAAxB,EAAsC,SAAA;IACrC,UAAU,CAAC,IAAX,CAAgB,SAAhB,EAA2B,IAA3B;AAEA,WAAO;EAH8B,CAAtC;;EAKA,UAAA,GAAa,SAAC,UAAD;IACZ,IAAG,UAAA,KAAc,uBAAjB;MACC,sBAAsB,CAAC,OAAvB,CAA+B,aAA/B,CAA6C,CAAC,IAA9C,CAAA;MACA,cAAc,CAAC,OAAf,CAAuB,aAAvB,CAAqC,CAAC,IAAtC,CAAA;MACA,kBAAkB,CAAC,GAAnB,CAAuB,gCAAvB;MACA,UAAU,CAAC,IAAX,CAAgB,SAAhB,EAA2B,IAA3B,EAJD;;IAMA,IAAG,UAAA,KAAc,wBAAjB;MACC,sBAAsB,CAAC,OAAvB,CAA+B,aAA/B,CAA6C,CAAC,IAA9C,CAAA;MACA,cAAc,CAAC,OAAf,CAAuB,aAAvB,CAAqC,CAAC,IAAtC,CAAA;MACA,kBAAkB,CAAC,GAAnB,CAAuB,gCAAvB;MAEA,UAAU,CAAC,IAAX,CAAgB,SAAhB,EAA2B,KAA3B;MACA,UAAU,CAAC,MAAX,CAAkB,uBAAlB,CAA0C,CAAC,IAA3C,CAAgD,SAAhD,EAA2D,IAA3D,EAND;;IAQA,IAAG,UAAA,KAAc,yBAAjB;MACC,sBAAsB,CAAC,OAAvB,CAA+B,aAA/B,CAA6C,CAAC,IAA9C,CAAA;MACA,cAAc,CAAC,OAAf,CAAuB,aAAvB,CAAqC,CAAC,IAAtC,CAAA;MACA,kBAAkB,CAAC,GAAnB,CAAuB,wBAAvB;aACA,UAAU,CAAC,IAAX,CAAgB,SAAhB,EAA2B,IAA3B,EAJD;;EAfY;AA/Bb","file":"bitrix_download_form.js","sourcesContent":["downloadAsInputName = \"download_as\"\r\ndownloadAsInput = $(\"[name=#{downloadAsInputName}]\")\r\ndownloadAsInputUpdateVal = \"update\"\r\ndownloadAsInputFreshVal = \"fresh\"\r\ndownloadAsInputForTestVal = \"for_test\"\r\n\r\nupdateDescriptionInput = $(\"[name=description]\")\r\nupdatePhpInput = $(\"[name=updater]\")\r\nfilesEncodingInput = $(\"[name=files_encoding]\")\r\nfilesEncodingInputUtfVal = \"utf-8\"\r\nfilesEncodingInputWindows1251Val = \"windows-1251\"\r\nfilesInput = $(\"[name^=files]\")\r\n\r\n\r\n$(document).on \"change\", \"[name^=#{downloadAsInputName}]\", () ->\r\n\tdownloadAsInput = $(this)\r\n\tdownloadAs = downloadAsInput.val()\r\n\tchangeForm(downloadAs)\r\n\r\n\treturn\r\n\r\n$(document).ready ->\r\n\tchangeForm(downloadAsInput.val())\r\n\r\n\treturn\r\n\r\n$(document).on \"click\", \".check-all\", () ->\r\n\tfilesInput.prop('checked', true) # отмечаем все файлы\r\n\r\n\treturn false\r\n\r\nchangeForm = (downloadAs) ->\r\n\tif downloadAs == downloadAsInputFreshVal\r\n\t\tupdateDescriptionInput.parents('.form-group').hide()\r\n\t\tupdatePhpInput.parents('.form-group').hide()\r\n\t\tfilesEncodingInput.val(filesEncodingInputWindows1251Val)\r\n\t\tfilesInput.prop('checked', true) # отмечаем все файлы\r\n\r\n\tif downloadAs == downloadAsInputUpdateVal\r\n\t\tupdateDescriptionInput.parents('.form-group').show()\r\n\t\tupdatePhpInput.parents('.form-group').show()\r\n\t\tfilesEncodingInput.val(filesEncodingInputWindows1251Val)\r\n\r\n\t\tfilesInput.prop('checked', false)\r\n\t\tfilesInput.filter('[data-changed=\"true\"]').prop('checked', true) # отмечаем только изменённые файлы\r\n\r\n\tif downloadAs == downloadAsInputForTestVal\r\n\t\tupdateDescriptionInput.parents('.form-group').hide()\r\n\t\tupdatePhpInput.parents('.form-group').hide()\r\n\t\tfilesEncodingInput.val(filesEncodingInputUtfVal)\r\n\t\tfilesInput.prop('checked', true) # отмечаем все файлы"]}