{"version":3,"sources":["bitrix_lang_pages.coffee"],"names":[],"mappings":"AACA;EAAA,CAAA,CAAE,QAAF,CAAW,CAAC,EAAZ,CAAe,QAAf,EAAyB,aAAzB,EAAwC,SAAA;AACvC,WAAO;EADgC,CAAxC;;EAIA,CAAA,CAAE,QAAF,CAAW,CAAC,EAAZ,CAAe,OAAf,EAAwB,oBAAxB,EAA8C,SAAA;AAC7C,QAAA;IAAA,MAAA,GAAS,CAAA,CAAE,IAAF;IACT,GAAA,GAAM,MAAM,CAAC,OAAP,CAAe,IAAf;IAEN,IAAA,GAAO,MAAM,CAAC,OAAP,CAAe,MAAf;IACP,GAAA,GAAM,IAAI,CAAC,IAAL,CAAU,QAAV;IACN,MAAA,GAAS,IAAI,CAAC,IAAL,CAAU,QAAV;IAET,UAAA,GAAa,IAAI,CAAC,IAAL,CAAU,QAAV;IACb,UAAU,CAAC,IAAX,CAAgB,UAAhB,EAA4B,IAA5B;IAEA,IAAA,GAAO,IAAI,CAAC,cAAL,CAAA;IACP,IAAI,CAAC,IAAL,CAAU;MAAC,IAAA,EAAM,MAAM,CAAC,IAAP,CAAY,MAAZ,CAAP;MAA4B,KAAA,EAAO,MAAM,CAAC,IAAP,CAAY,OAAZ,CAAnC;KAAV;IAEA,CAAC,CAAC,IAAF,CAAO,GAAP,EACC;MAAA,MAAA,EAAQ,MAAR;MACA,IAAA,EAAM,IADN;MAEA,KAAA,EAAO,SAAC,KAAD,EAAQ,UAAR,EAAoB,WAApB;QACN,QAAQ,CAAC,MAAT,CAAA;MADM,CAFP;MAKA,OAAA,EAAS,SAAC,IAAD,EAAO,UAAP,EAAmB,KAAnB;QAER,QAAQ,CAAC,MAAT,CAAA;MAFQ,CALT;KADD;AAWA,WAAO;EAzBsC,CAA9C;AAJA","file":"bitrix_lang_pages.js","sourcesContent":["# чтобы нельзя было отправить форму по ентеру\r\n$(document).on \"submit\", \".langs-form\", () ->\r\n\treturn false\r\n\r\n# переделка работы формы на аякс, сложность в том, что нам важно на какую кнопку нажали\r\n$(document).on \"click\", \".langs-form button\", () ->\r\n\tbutton = $(this)\r\n\trow = button.parents('tr')\r\n\r\n\tform = button.parents('form')\r\n\turl = form.attr('action')\r\n\tmethod = form.attr('method')\r\n\r\n\tallButtons = form.find('button')\r\n\tallButtons.prop('disabled', true) # блокируем кнопки, потому что мы должны явно передавать позицию фразы в тексте, это убивает ассинхронность # todo избавиться от этого\r\n\r\n\tdata = form.serializeArray()\r\n\tdata.push({name: button.attr('name'), value: button.attr('value')})\r\n\r\n\t$.ajax url,\r\n\t\tmethod: method\r\n\t\tdata: data\r\n\t\terror: (jqXHR, textStatus, errorThrown) ->\r\n\t\t\tlocation.reload() # всё равно пришлось бы перезагружать\r\n\t\t\treturn\r\n\t\tsuccess: (data, textStatus, jqXHR) ->\r\n\t\t\t# row.remove() # просто удаляем строку\r\n\t\t\tlocation.reload() # пока так\r\n\t\t\treturn\r\n\r\n\treturn false"]}