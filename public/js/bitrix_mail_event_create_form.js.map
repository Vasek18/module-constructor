{"version":3,"sources":["bitrix_mail_event_create_form.coffee"],"names":[],"mappings":"AACA;EAAA,CAAA,CAAE,QAAF,CAAW,CAAC,EAAZ,CAAe,QAAf,EAAyB,kBAAzB,EAA6C,SAAA;AAC5C,QAAA;IAAA,KAAA,GAAQ,CAAA,CAAE,IAAF;IACR,GAAA,GAAM,CAAA,CAAE,IAAF,CAAO,CAAC,GAAR,CAAA;IAON,GAAA,GAAM;IAEN,CAAA,GAAI;AACJ,WAAM,CAAC,MAAA,GAAS,GAAG,CAAC,IAAJ,CAAS,GAAT,CAAV,CAAN;MACC,IAAA,GAAO,MAAO,CAAA,CAAA;MACd,IAAA,GAAO,MAAO,CAAA,CAAA;MAEd,IAAG,IAAH;QACC,IAAA,CAAO,CAAC,CAAA,CAAE,gCAAF,CAAmC,CAAC,EAApC,CAAuC,CAAvC,CAAyC,CAAC,MAA3C,CAAP;UACC,CAAA,CAAE,YAAF,CAAe,CAAC,MAAhB,CAAuB,yKAAA,GAEkG,CAFlG,GAEoG,yKAF3H,EADD;;QAUA,CAAA,CAAE,gCAAF,CAAmC,CAAC,EAApC,CAAuC,CAAvC,CAAyC,CAAC,GAA1C,CAA8C,IAA9C,EAXD;;MAaA,IAAG,IAAH;QACC,IAAG,CAAC,CAAA,CAAE,gCAAF,CAAmC,CAAC,EAApC,CAAuC,CAAvC,CAAyC,CAAC,MAA3C,CAAH;UACC,CAAA,CAAE,gCAAF,CAAmC,CAAC,EAApC,CAAuC,CAAvC,CAAyC,CAAC,GAA1C,CAA8C,IAA9C,EADD;SADD;;MAIA,CAAA;IArBD;EAZ4C,CAA7C;;EA2CA,CAAA,CAAE,QAAF,CAAW,CAAC,EAAZ,CAAe,OAAf,EAAwB,cAAxB,EAAwC,SAAA;AACvC,QAAA;IAAA,KAAA,GAAQ,CAAA,CAAE,UAAF,CAAa,CAAC;IAGtB,MAAA,GAAS,CAAA,CAAE,eAAF,CAAkB,CAAC,KAAnB,CAAA;IACT,CAAA,CAAE,IAAF,CAAO,CAAC,MAAR,CAAe,MAAf;IAEA,MAAA,GAAS,CAAA,CAAE,eAAF;IACT,MAAM,CAAC,IAAP,CAAY,+BAAZ,CAA4C,CAAC,IAA7C,CAAkD,IAAlD,EAAwD,uBAAA,GAAwB,KAAhF;IACA,MAAM,CAAC,IAAP,CAAY,+BAAZ,CAA4C,CAAC,IAA7C,CAAkD,IAAlD,EAAwD,uBAAA,GAAwB,KAAhF;IACA,MAAM,CAAC,IAAP,CAAY,+BAAZ,CAA4C,CAAC,IAA7C,CAAkD,oBAAlD,EAAwE,uBAAA,GAAwB,KAAhG;AAEA,WAAO;EAZgC,CAAxC;AA3CA","file":"bitrix_mail_event_create_form.js","sourcesContent":["# распаршивание описания на переменные\r\n$(document).on \"change\", \"#MAIL_EVENT_VARS\", ->\r\n\tinput = $(this)\r\n\tval = $(this).val()\r\n\r\n#\tvals = val.match(/#(.+)#\\s*-\\s*([^#]+)/gi)\r\n#\tconsole.log (vals)\r\n#\tconsole.log (vals[0])\r\n#\tconsole.log (vals[1])\r\n\r\n\treg = /#(.+)#\\s*-\\s*([^#]+)/gi\r\n\r\n\ti = 0\r\n\twhile (result = reg.exec(val))\r\n\t\tcode = result[1]\r\n\t\tname = result[2]\r\n\r\n\t\tif code\r\n\t\t\tunless ($(\"[name*='MAIL_EVENT_VARS_CODES'\").eq(i).length)\r\n\t\t\t\t$('.vals-list').append(\"<div class='form-group'>\r\n\t\t\t\t<div class='col-md-6'>\r\n\t\t\t\t<input class='form-control' type='text' placeholder='Название' name='MAIL_EVENT_VARS_NAMES[]' id='MAIL_EVENT_VARS_NAME_#{i}'>\r\n\t\t\t\t</div>\r\n                        <div class='col-md-6'>\r\n                            <input class='form-control' type='text' placeholder='Код' name='MAIL_EVENT_VARS_CODES[]' id='MAIL_EVENT_VARS_CODE_{#i}'>\r\n                        </div>\r\n\t\t\t\t</div>\")\r\n\r\n\t\t\t$(\"[name*='MAIL_EVENT_VARS_CODES'\").eq(i).val(code)\r\n\r\n\t\tif name\r\n\t\t\tif ($(\"[name*='MAIL_EVENT_VARS_NAMES'\").eq(i).length)\r\n\t\t\t\t$(\"[name*='MAIL_EVENT_VARS_NAMES'\").eq(i).val(name)\r\n\r\n\t\ti++\r\n\r\n\r\n\t#arr = val.split('\\r')\r\n\t#for own i, pair of arr\r\n\t#\tconsole.log pair\r\n\r\n\treturn\r\n\r\n# добавление дополнительной строчки для переменной\r\n$(document).on \"click\", \".add-var-row\", ->\r\n\tcount = $('.var-row').length\r\n\r\n\t# вставляем вёрстку\r\n\tvarRow = $('.var-row:last').clone()\r\n\t$(this).before(varRow)\r\n\r\n\tnewRow = $('.var-row:last')\r\n\tnewRow.find('[name*=MAIL_EVENT_VARS_NAMES]').attr('id', \"MAIL_EVENT_VARS_NAME_#{count}\")\r\n\tnewRow.find('[name*=MAIL_EVENT_VARS_CODES]').attr('id', \"MAIL_EVENT_VARS_CODE_#{count}\")\r\n\tnewRow.find('[name*=MAIL_EVENT_VARS_CODES]').attr('data-translit_from', \"MAIL_EVENT_VARS_NAME_#{count}\")\r\n\r\n\treturn false"]}